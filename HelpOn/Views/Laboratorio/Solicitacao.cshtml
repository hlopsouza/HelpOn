@model HelpOn.Web.ViewModel.ChamadoViewModel
@{
    ViewBag.Title = "Laboratorio";
}

<h2>Laboratorio</h2>


<div  id="botoes">
    @foreach (var descricao in Model.Descricoes)
    {
        if ((descricao.IDDescricao % 2) == 1)
        {
            <div  style="float:left;width:49%">
                <button class="btn btn-custom btn-lg btn-block" float="left" data-toggle="modal" data-target="#myModal">@descricao.Nome</button>
            </div>
            
        }
        else
        {
            <div  style="float:right;width:49%">
                <button class="btn btn-custom btn-lg btn-block" float="right" data-toggle="modal" data-target="#myModal">@descricao.Nome</button>
            </div>
            
        }

    }
</div>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Atenção!</h4>
            </div>
            <div class="modal-body">

            </div>
            <div class="modal-footer">
                @using (Html.BeginForm("Cadastrar", "Chamado", "POST"))
                {
                    @Html.HiddenFor(c => c.IDDescricao)
                    @Html.HiddenFor(c => c.Processo, new { @Value = "Aberto" })
                    @Html.HiddenFor(c => c.NumeroLab, new { @Value = Model.Lab.NumeroLab })
                    @Html.HiddenFor(c => c.NumeroAndar, new { @Value = Model.Lab.NumeroAndar })
                    @Html.HiddenFor(c => c.IDUnidade, new { @Value = Model.Lab.IDUnidade })
                    @Html.HiddenFor(c => c.DataChamado, new { @Value = DateTime.Now })
                    @Html.HiddenFor(c => c.IDNivel)
                    

                    <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
                    <button type="submit" class="btn btn-custom">Enviar Solicitação</button>
                }
            </div>
        </div>
    </div>
</div>


@section scripts{
 <script>
     $().ready(function () {

          @foreach (var tipo in Model.Descricoes)
         {
             <text>
             $("#botoes button").click(function () {
                 if ($(this).html() == "@tipo.Nome") {
                     $("#IDDescricao").val(@tipo.IDDescricao);
                     $("#IDNivel").val(3);
                     $(".modal-body").html("Deseja Realmente solicitar um Monitor?");
                 }});
             </text>
         }
         });
</script>
}