
@{
    ViewBag.Title = "Index";
}

<br />

<div class="panel panel-default">
    <div class="panel-body tabs">
        <ul class="nav nav-pills">
            <li class="active">
                <a href="#listarunidade" data-toggle="tab">
                    <i class="glyphicon glyphicon-map-marker"></i> Unidades Cadastradas
                </a>
            </li>
            <li>
                <a href="#cadastrarunidade" data-toggle="tab">
                    <i class="glyphicon glyphicon-edit"></i> Cadastro de Unidades
                </a>
            </li>
        </ul>

        <div class="tab-content">
            <div class="tab-pane fade in active" id="listarunidade">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Unidade</th>
                            <th>Logradouro</th>
                            <th>Número</th>
                            <th>CEP</th>
                            <th>Bairro</th>
                            <th>Cidade</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var unidade in ViewBag.Unidades)
                        {
                            <tr>
                                <td>@unidade.Nome</td>
                                <td>@unidade.Logradouro</td>
                                <td>@unidade.Numero</td>
                                <td>@unidade.CEP</td>
                                <td>@unidade.Bairro</td>
                                <td>@unidade.Cidade</td>
                            </tr>
                        }

                    </tbody>
                </table>
            </div>
            <div class="tab-pane fade" id="cadastrarunidade">
                <div class="row">
                    <div class="col-md-12">
                        <br />
                        <form class="form-horizontal" action="/Home/Cadastrar" method="post">
                            <fieldset>
                                <!-- Nome -->
                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="Nome">Nome</label>
                                    <div class="col-md-10">
                                        <input id="Nome" name="Nome" type="text" placeholder="Nome da unidade" class="form-control" autofocus>
                                    </div>
                                </div>
                                @Html.ValidationMessage("Nome")

                                <!-- CEP -->
                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="CEP">CEP</label>
                                    <div class="col-md-10">
                                        <input id="CEP" name="CEP" type="text" placeholder="Informe o CEP" class="form-control">
                                    </div>
                                </div>
                                @Html.ValidationMessage("CEP")

                                <!-- Logradouro e número -->
                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="Logradouro">Logradouro</label>
                                    <div class="col-md-5">
                                        <input id="Logradouro" name="Logradouro" type="text" placeholder="Informe o Logradouro" class="form-control">
                                    </div>
                                    @Html.ValidationMessage("Logradouro")
                                    <label class="col-md-1 control-label" for="Numero">Número</label>
                                    <div class="col-md-4">
                                        <input id="Numero" name="Numero" type="text" placeholder="Informe o número" class="form-control">
                                    </div>
                                    @Html.ValidationMessage("Numero")
                                </div>

                                <!-- Complemento -->
                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="Complemento">Complemento</label>
                                    <div class="col-md-10">
                                        <input id="Complemento" name="Complemento" type="text" placeholder="Informe o Complemento" class="form-control">
                                    </div>
                                </div>

                                <!-- Bairro -->
                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="Bairro">Bairro</label>
                                    <div class="col-md-10">
                                        <input id="Bairro" name="Bairro" type="text" placeholder="Informe o Bairro" class="form-control">
                                    </div>
                                </div>
                                @Html.ValidationMessage("Bairro")

                                <!-- Cidade -->
                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="Cidade">Cidade</label>
                                    <div class="col-md-10">
                                        <input id="Cidade" name="Cidade" type="text" placeholder="Informe a Cidade" class="form-control">
                                    </div>
                                </div>
                                 @Html.ValidationMessage("Cidade")



                                <!-- Form actions -->
                                <div class="form-group">
                                    <div class="col-md-2"></div>
                                    <div class="col-md-10">
                                        <br />
                                        <button type="submit" class="btn btn-default">
                                            <i class="glyphicon glyphicon-floppy-disk"></i> Cadastrar
                                        </button>
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

@section scripts{
    <script>
        $().ready(function () {

            $("#CEP").blur(function () {
                $.ajax({
                    url: "http://api.postmon.com.br/v1/cep/" + $("#CEP").val(),
                    method: "GET",
                    success: function (data) {
                        $("#Logradouro").val(data.logradouro);
                        $("#Cidade").val(data.cidade);
                        $("#Bairro").val(data.bairro);
                    }
                });
            });

            $("#CEP").mask("99999-999");

        });

    </script>
}


